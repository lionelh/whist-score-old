{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/main/services/navigation-notification.service\";\nimport * as i2 from \"src/app/main/services/data.service\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../../validators/unique-player-name.validator\";\nimport * as i5 from \"@angular/common\";\n\nfunction PlayerManagementComponent_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2, \"Aucun joueur trouv\\u00E9 dans la base donn\\u00E9es !\");\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", 2);\n  }\n}\n\nfunction PlayerManagementComponent_tr_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const p_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    i0.ɵɵclassProp(\"bg-info\", i_r5 % 2 == 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r4.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r4.name);\n  }\n}\n\nfunction PlayerManagementComponent_div_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1, \" Validation en cours... \");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PlayerManagementComponent_div_35_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Le nom est obligatoire.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PlayerManagementComponent_div_35_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Le nom doit contenir au moins 2 caract\\u00E8res.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PlayerManagementComponent_div_35_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Le nom doit comporter maximum 150 caract\\u00E8res.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PlayerManagementComponent_div_35_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Le nom du joueur existe d\\u00E9j\\u00E0.\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction PlayerManagementComponent_div_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, PlayerManagementComponent_div_35_div_1_Template, 2, 0, \"div\", 9);\n    i0.ɵɵtemplate(2, PlayerManagementComponent_div_35_div_2_Template, 2, 0, \"div\", 9);\n    i0.ɵɵtemplate(3, PlayerManagementComponent_div_35_div_3_Template, 2, 0, \"div\", 9);\n    i0.ɵɵtemplate(4, PlayerManagementComponent_div_35_div_4_Template, 2, 0, \"div\", 9);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.name == null ? null : ctx_r3.name.errors == null ? null : ctx_r3.name.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.name == null ? null : ctx_r3.name.errors == null ? null : ctx_r3.name.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.name == null ? null : ctx_r3.name.errors == null ? null : ctx_r3.name.errors[\"maxlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.name == null ? null : ctx_r3.name.errors == null ? null : ctx_r3.name.errors[\"uniquePlayerName\"]);\n  }\n}\n\nexport let PlayerManagementComponent = /*#__PURE__*/(() => {\n  class PlayerManagementComponent {\n    constructor(_navigationNotifierService, _dataService, _fb, _uniquePlayerNameValidator) {\n      this._navigationNotifierService = _navigationNotifierService;\n      this._dataService = _dataService;\n      this._fb = _fb;\n      this._uniquePlayerNameValidator = _uniquePlayerNameValidator;\n      this.creationForm = this._fb.group({\n        name: ['', [Validators.required, Validators.minLength(2), Validators.maxLength(150)], [_uniquePlayerNameValidator], {\n          updateOn: \"blur\"\n        }]\n      });\n    }\n\n    ngOnInit() {\n      this._navigationNotifierService.announcePageChange('players');\n\n      this.players$ = this._dataService.findAllPlayers();\n    }\n\n    get name() {\n      var _a;\n\n      return (_a = this.creationForm) === null || _a === void 0 ? void 0 : _a.get('name');\n    }\n\n    onSubmit() {\n      var _a, _b;\n\n      if ((_a = this.creationForm) === null || _a === void 0 ? void 0 : _a.valid) {\n        let p = {\n          name: (_b = this.creationForm) === null || _b === void 0 ? void 0 : _b.value['name']\n        };\n\n        this._dataService.createPlayer(p).subscribe(() => {\n          this.players$ = this._dataService.findAllPlayers();\n        });\n\n        this.creationForm.reset();\n      }\n    }\n\n  }\n\n  PlayerManagementComponent.ɵfac = function PlayerManagementComponent_Factory(t) {\n    return new (t || PlayerManagementComponent)(i0.ɵɵdirectiveInject(i1.NavigationNotifierService), i0.ɵɵdirectiveInject(i2.DataService), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.UniquePlayerNameValidator));\n  };\n\n  PlayerManagementComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PlayerManagementComponent,\n    selectors: [[\"wsw-player-management\"]],\n    decls: 40,\n    vars: 16,\n    consts: [[1, \"container\"], [1, \"row\"], [1, \"col\"], [1, \"card\", \"text-white\", \"border-primary\"], [1, \"card-header\", \"bg-primary\"], [1, \"card-body\"], [1, \"card-text\"], [1, \"table\", \"table-striped\"], [1, \"bg-primary\", \"text-white\"], [4, \"ngIf\"], [3, \"bg-info\", 4, \"ngFor\", \"ngForOf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\", \"required\"], [\"for\", \"name\", 1, \"control-label\", \"text-black\"], [\"id\", \"name\", \"type\", \"text\", \"formControlName\", \"name\", 1, \"form-control\"], [1, \"form-helper\"], [\"class\", \"text-warning\", 4, \"ngIf\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [1, \"form-group\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [1, \"text-warning\"], [1, \"invalid-feedback\"]],\n    template: function PlayerManagementComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"h1\");\n        i0.ɵɵtext(4, \"Gestion des joueurs\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(5, \"div\", 1)(6, \"div\", 2)(7, \"div\", 3)(8, \"div\", 4);\n        i0.ɵɵtext(9, \"Liste des joueurs\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 5)(11, \"div\", 6)(12, \"table\", 7)(13, \"tr\", 8)(14, \"th\");\n        i0.ɵɵtext(15, \"ID du joueur\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"th\");\n        i0.ɵɵtext(17, \"Nom du joueur\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtemplate(18, PlayerManagementComponent_tr_18_Template, 3, 1, \"tr\", 9);\n        i0.ɵɵpipe(19, \"async\");\n        i0.ɵɵtemplate(20, PlayerManagementComponent_tr_20_Template, 5, 4, \"tr\", 10);\n        i0.ɵɵpipe(21, \"async\");\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(22, \"div\", 2)(23, \"div\", 3)(24, \"div\", 4);\n        i0.ɵɵtext(25, \"Cr\\u00E9ation d'un joueur\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 5)(27, \"div\", 6)(28, \"form\", 11);\n        i0.ɵɵlistener(\"ngSubmit\", function PlayerManagementComponent_Template_form_ngSubmit_28_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(29, \"div\", 12)(30, \"label\", 13);\n        i0.ɵɵtext(31, \"Nom du joueur\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(32, \"input\", 14)(33, \"div\", 15);\n        i0.ɵɵtemplate(34, PlayerManagementComponent_div_34_Template, 2, 0, \"div\", 16);\n        i0.ɵɵtemplate(35, PlayerManagementComponent_div_35_Template, 5, 4, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"div\", 18)(37, \"fieldset\")(38, \"button\", 19);\n        i0.ɵɵtext(39, \"Enregistrer\");\n        i0.ɵɵelementEnd()()()()()()()()()();\n      }\n\n      if (rf & 2) {\n        let tmp_0_0;\n        i0.ɵɵadvance(18);\n        i0.ɵɵproperty(\"ngIf\", ((tmp_0_0 = i0.ɵɵpipeBind1(19, 12, ctx.players$)) == null ? null : tmp_0_0.length) == 0);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(21, 14, ctx.players$));\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"formGroup\", ctx.creationForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵclassProp(\"has-danger\", (ctx.name == null ? null : ctx.name.invalid) && ((ctx.name == null ? null : ctx.name.dirty) || (ctx.name == null ? null : ctx.name.touched)));\n        i0.ɵɵadvance(3);\n        i0.ɵɵclassProp(\"is-invalid\", (ctx.name == null ? null : ctx.name.invalid) && ((ctx.name == null ? null : ctx.name.dirty) || (ctx.name == null ? null : ctx.name.touched)))(\"is-valid\", (ctx.name == null ? null : ctx.name.valid) && ((ctx.name == null ? null : ctx.name.dirty) || (ctx.name == null ? null : ctx.name.touched)));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ((ctx.name == null ? null : ctx.name.dirty) || (ctx.name == null ? null : ctx.name.touched)) && (ctx.name == null ? null : ctx.name.status) === \"PENDING\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", (ctx.name == null ? null : ctx.name.invalid) && ((ctx.name == null ? null : ctx.name.dirty) || (ctx.name == null ? null : ctx.name.touched)));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !(ctx.creationForm == null ? null : ctx.creationForm.valid));\n      }\n    },\n    directives: [i5.NgIf, i5.NgForOf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName],\n    pipes: [i5.AsyncPipe],\n    styles: [\"\"]\n  });\n  return PlayerManagementComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}